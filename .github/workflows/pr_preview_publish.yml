---
name: Publish PR preview

# Controls when the action will run.
on: [ pull_request_target ]

jobs:
  deploy:
    name: Build and publish PR preview
    runs-on: ubuntu-latest
    if: ${{github.event.repository.public}} #github pages are always public, not to use for private repos.
    steps:
      - name: checkout code from repos
        uses: actions/checkout@v2
        with:
          fetch-depth: 0 # Required for mkdocs to be able to display pages last update info

      - uses: actions/checkout@v2
        with:
          repository: ConsenSys/doctools.action-builder
          path: doctools

      - name: Build and publish PR preview
        uses: ConsenSys/doctools.action-builder/actions/pr-preview-publish@main
